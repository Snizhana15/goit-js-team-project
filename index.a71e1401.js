function e(e=1){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=fadee9dfff8cb6b1bff36771479589d6&page=${e}`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}))}const t=document.querySelector(".card-set");async function n(){try{const{genres:e}=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=fadee9dfff8cb6b1bff36771479589d6&language=uk").then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}));return e}catch(e){alert(e)}}async function i(t){try{const{results:n,total_pages:i}=await e(t);return{movies:n,totalPages:i}}catch(e){alert(e)}}async function s(e){const s=await n(),{movies:r,totalPages:a}=await i(e),l=r.map((e=>function(e,t){const{genre_ids:n,original_title:i,id:s,release_date:r,title:a,poster_path:l}=e,c=function(e){let t="";switch(e.length){case 1:t=`<li class="card-set__genre-movie">${e[0]}</li>`;break;case 2:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]}</li>`;break;case 3:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[2]}</li>`;break;default:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">Інші</li>`}return t}(function(e,t){return e.map((e=>t.find((t=>t.id===e)).name))}(n,t)),o=new Date(r).getFullYear().toString();return`\n        <li class="card-set__item" data-id="${s}">\n            <div class="card-set__box-img">\n            <img\n                loading="lazy"\n                src="https://image.tmdb.org/t/p/original${l}"\n                alt="${i}"\n                class="card-set__img"\n                \n            />\n            </div>\n            <h3 class="card-set__title">${a}</h3>\n            <div class="card-set__description">\n            <ul class="card-set__genre">\n                ${c}\n            </ul>\n            <span class="card-set__genre-movie">&nbsp| ${o}</span>\n            </div>\n        </li>`}(e,s))).join("");return t.innerHTML="",t.insertAdjacentHTML("afterbegin",l),a}let r=1;const a=document.querySelector('[data-move="backward"]'),l=document.querySelector('[data-move="forward"]'),c=document.querySelector(".number-page"),o=document.querySelector(".card-set");function d(e,t){function n(e){e.removeAttribute("disabled"),e.classList.remove("movies-navigation__arrow-btn--disabled")}function i(e){e.setAttribute("disabled",""),e.classList.add("movies-navigation__arrow-btn--disabled")}function s(){if(e<6)return l.style.display="none",a.style.display="none",function(){let t="";c.innerHTML="";for(let n=0;n<e+2;n+=1)t+=`<li class="number-page__item">\n                <button type="button" class="number-page__btn">${n}</button>\n              </li>`;c.insertAdjacentHTML("afterbegin",t)}(),p(),_(),void c.children[1].firstElementChild.classList.add("number-page__btn--current");p(),g(),c.children[1].firstElementChild.classList.add("number-page__btn--current"),c.lastElementChild.firstElementChild.textContent=String(e),i(a),n(l),v()}function d(){document.querySelector(".number-page__btn--current").classList.remove("number-page__btn--current")}function u(){d(),c.children[r].firstElementChild.classList.add("number-page__btn--current")}function m(){d(),c.children[r-e+5].firstElementChild.classList.add("number-page__btn--current")}function _(){c.lastElementChild.style.display="none",c.children[c.children.length-2].style.marginRight="0px"}function p(){c.firstElementChild.style.display="none"}function f(){c.firstElementChild.style.display="list-item"}function g(){c.lastElementChild.style.display="list-item",c.children[c.children.length-2].style.marginRight="16px"}function b(){for(let e=1;e<c.children.length-1;e+=1){const t=r-3+e;c.children[e].firstElementChild.textContent=t.toString()}}function v(){for(let e=1;e<c.children.length-1;e+=1){const t=e;c.children[e].firstElementChild.textContent=t.toString()}}function h(){for(let t=1;t<c.children.length-1;t+=1){const n=e-5+t;c.children[t].firstElementChild.textContent=n.toString()}}s(),a.addEventListener("click",(function(){r-=1,t(r),o.scrollIntoView(),n(l),1===r&&i(a);if(r>e-3)return void m();r<4&&(p(),u());r>=3&&r<=e-3&&(g(),b())})),l.addEventListener("click",(function(){r+=1,t(r),o.scrollIntoView(),n(a),r===e&&i(l);if(r<4)return void u();r>e-3&&(_(),m());r>=4&&r<=e-2&&(f(),b())})),c.addEventListener("click",(function(y){if("BUTTON"!==y.target.nodeName)return;if(y.target.classList.contains("number-page__btn--current"))return;if(r=Number(y.target.textContent),t(r),o.scrollIntoView(),1===r)return d(),void s();if(r===e)return d(),void function(){_(),e>5&&f();if(c.children[e>=5?5:e].firstElementChild.classList.add("number-page__btn--current"),n(a),i(l),e<=5)return void v();h()}();r>=4&&r<=e-3&&(d(),c.children[3].firstElementChild.classList.add("number-page__btn--current"),f(),g(),n(l),n(a),b());if(r<4)return u(),p(),e>5&&g(),n(l),void v();r>e-3&&(m(),_(),e>5&&f(),n(l),n(a),h())}))}const u={openModalFilm:document.querySelector(".card-set"),closeModalFilm:document.querySelector(".film-card__button-close"),body:document.querySelector("body"),backdropModalFilm:document.querySelector(".backdrop"),modalFilm:document.querySelector(".film-card__box")},m=document.querySelector(".spinner--modal");console.log(m);const _=e=>{const{poster_path:t,title:n,id:i,vote_average:s,vote_count:r,popularity:a,original_title:l,genres:c,overview:o}=e,d=`<div class="film-card__image-block">\n      <img\n        class="film-card__image"\n        src="https://image.tmdb.org/t/p/original${t}"\n        alt="film"\n      />\n    </div>\n    <div class="film-card__description">\n      <h1 class="film-card__description-title">${n}</h1>\n      <ul class="film-card__description-set">\n        <li class="description-set">\n          <p class="description-set__text">Vote / Votes</p>\n          <p class="description-set__value">\n            <span class="description-set__rating">${s}</span>\n            <span class="description-set__separator">/</span>\n            <span class="description-set__vote">${r}</span>\n          </p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Popularity</p>\n          <p class="description-set__value">${a}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Original Title</p>\n          <p class="description-set__value">${l}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Genre</p>\n          <p class="description-set__value">${c.map((e=>e.name)).join(", ")}</p>\n        </li>\n      </ul>\n      <div class="film-card__description-about">\n        <h2 class="description-about__title">About</h2>\n        <p class="description-about__text">${o}</p>\n      </div>\n      <div class="film-card__description-button">\n        <button class="description-button description-button__watched" data-id="${i}">\n          add to Watched\n        </button>\n        <button class="description-button description-button__queue" data-id="${i}">\n          add to queue\n        </button>\n      </div>\n    </div>\n  </div>`;u.modalFilm.insertAdjacentHTML("beforeend",d)};u.openModalFilm.addEventListener("click",(async e=>{if(m.classList.add("spinner"),!e.target.closest(".card-set__item"))return;u.modalFilm.innerHTML="",u.backdropModalFilm.classList.remove("visually-hidden"),u.body.style.overflow="hidden";const t=e.target.closest(".card-set__item").dataset.id,n=await(i=t,fetch(`https://api.themoviedb.org/3/movie/${i}?api_key=fadee9dfff8cb6b1bff36771479589d6&language=uk`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e})));var i;_(n),m.classList.remove("spinner")})),u.closeModalFilm.addEventListener("click",(()=>{u.backdropModalFilm.classList.add("visually-hidden"),u.body.style.overflow="visible"}));const p={openModalBtn:document.querySelector("[data-modal-opens]"),modal:document.querySelector("[data-modals]"),body:document.querySelector("body")};p.openModalBtn.addEventListener("click",(function(){p.modal.classList.remove("is-hiddens"),p.body.addEventListener("keyup",(function e(t){"Escape"===t.code&&(p.modal.classList.add("is-hiddens"),p.body.removeEventListener("keyup",e))})),p.modal.addEventListener("click",(function e(t){t.target.closest(".modals")||(p.modal.classList.add("is-hiddens"),p.modal.removeEventListener("click",e))}))}));const f=document.querySelector(".film-card__box");f.addEventListener("click",(function(e){if(!e.target.closest(".description-button__watched"))return;const t=e.target.closest(".description-button__watched").dataset.id,n=JSON.parse(localStorage.getItem("watched")||"[]"),i=t;n.push(i),localStorage.setItem("watched",JSON.stringify(n))})),f.addEventListener("click",(function(e){if(!e.target.closest(".description-button__queue"))return;const t=e.target.closest(".description-button__queue").dataset.id,n=JSON.parse(localStorage.getItem("queue")||"[]"),i=t;n.push(i),localStorage.setItem("queue",JSON.stringify(n))})),async function(){const e=await s();d(e>50?50:e,s)}();
//# sourceMappingURL=index.a71e1401.js.map
