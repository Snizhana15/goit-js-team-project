function e(e){return fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=fadee9dfff8cb6b1bff36771479589d6&language=uk`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}))}const t={openModalFilm:document.querySelector(".card-set"),closeModalFilm:document.querySelector(".film-card__button-close"),body:document.querySelector("body"),backdropModalFilm:document.querySelector(".backdrop"),modalFilm:document.querySelector(".film-card__box")},n=document.querySelector(".spinner--modal"),i=e=>{const{poster_path:n,title:i,id:s,vote_average:r,vote_count:l,popularity:a,original_title:c,genres:d,overview:o}=e,u=`<div class="film-card__image-block">\n      <img\n        class="film-card__image"\n        src="https://image.tmdb.org/t/p/original${n}"\n        alt="film"\n      />\n    </div>\n    <div class="film-card__description">\n      <h1 class="film-card__description-title">${i}</h1>\n      <ul class="film-card__description-set">\n        <li class="description-set">\n          <p class="description-set__text">Vote / Votes</p>\n          <p class="description-set__value">\n            <span class="description-set__rating">${r}</span>\n            <span class="description-set__separator">/</span>\n            <span class="description-set__vote">${l}</span>\n          </p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Popularity</p>\n          <p class="description-set__value">${a}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Original Title</p>\n          <p class="description-set__value">${c}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Genre</p>\n          <p class="description-set__value">${d.map((e=>e.name)).join(", ")}</p>\n        </li>\n      </ul>\n      <div class="film-card__description-about">\n        <h2 class="description-about__title">About</h2>\n        <p class="description-about__text">${o}</p>\n      </div>\n      <div class="film-card__description-button">\n        <button class="description-button description-button__watched" data-id="${s}">\n          add to Watched\n        </button>\n        <button class="description-button description-button__queue" data-id="${s}">\n          add to queue\n        </button>\n      </div>\n    </div>\n  </div>`;t.modalFilm.insertAdjacentHTML("beforeend",u)},s=e=>{"Escape"===e.code&&(console.log(e.code),t.backdropModalFilm.classList.add("visually-hidden"),t.body.style.overflow="visible",t.body.removeEventListener("keydown",s))},r=e=>{e.target.closest(".film-card")||(t.backdropModalFilm.classList.add("visually-hidden"),t.body.style.overflow="visible")};t.openModalFilm.addEventListener("click",(async l=>{if(n.classList.add("spinner"),!l.target.closest(".card-set__item"))return;t.modalFilm.innerHTML="",t.backdropModalFilm.classList.remove("visually-hidden"),t.body.style.overflow="hidden";const a=l.target.closest(".card-set__item").dataset.id,c=await e(a);i(c),n.classList.remove("spinner"),t.body.addEventListener("keydown",s),t.backdropModalFilm.addEventListener("click",r)})),t.closeModalFilm.addEventListener("click",(()=>{t.backdropModalFilm.classList.add("visually-hidden"),t.body.style.overflow="visible"}));let l=1;const a=document.querySelector('[data-move="backward"]'),c=document.querySelector('[data-move="forward"]'),d=document.querySelector(".number-page"),o=document.querySelector(".card-set");function u(e,t){function n(e){e.removeAttribute("disabled"),e.classList.remove("movies-navigation__arrow-btn--disabled")}function i(e){e.setAttribute("disabled",""),e.classList.add("movies-navigation__arrow-btn--disabled")}function s(){if(e<6)return c.style.display="none",a.style.display="none",function(){let t="";d.innerHTML="";for(let n=0;n<e+2;n+=1)t+=`<li class="number-page__item">\n                <button type="button" class="number-page__btn">${n}</button>\n              </li>`;d.insertAdjacentHTML("afterbegin",t)}(),m(),p(),void d.children[1].firstElementChild.classList.add("number-page__btn--current");m(),g(),d.children[1].firstElementChild.classList.add("number-page__btn--current"),d.lastElementChild.firstElementChild.textContent=String(e),i(a),n(c),h(),y()}function r(){document.querySelector(".number-page__btn--current").classList.remove("number-page__btn--current")}function u(){r(),d.children[l].firstElementChild.classList.add("number-page__btn--current")}function _(){r(),d.children[l-e+5].firstElementChild.classList.add("number-page__btn--current")}function p(){d.lastElementChild.style.display="none",d.children[d.children.length-2].style.marginRight="0px"}function m(){d.firstElementChild.style.display="none"}function b(){d.firstElementChild.style.display="list-item"}function g(){d.lastElementChild.style.display="list-item",d.children[d.children.length-2].style.marginRight="16px"}function f(){for(let e=1;e<d.children.length-1;e+=1){const t=l-3+e;d.children[e].firstElementChild.textContent=t.toString()}}function h(){for(let e=1;e<d.children.length-1;e+=1){const t=e;d.children[e].firstElementChild.textContent=t.toString()}}function v(){for(let t=1;t<d.children.length-1;t+=1){const n=e-5+t;d.children[t].firstElementChild.textContent=n.toString()}}function y(){window.innerWidth<768&&(m(),p())}s(),a.addEventListener("click",(function(){l-=1,t(l),o.scrollIntoView(),n(c),1===l&&i(a);if(l>e-3)return void _();l<4&&(m(),u());l>=3&&l<=e-3&&(g(),f());y()})),c.addEventListener("click",(function(){l+=1,t(l),o.scrollIntoView(),n(a),l===e&&i(c);if(l<4)return void u();l>e-3&&(p(),_());l>=4&&l<=e-2&&(b(),f());y()})),d.addEventListener("click",(function(S){if("BUTTON"!==S.target.nodeName)return;if(S.target.classList.contains("number-page__btn--current"))return;if(l=Number(S.target.textContent),t(l),o.scrollIntoView(),1===l)return r(),void s();if(l===e)return r(),void function(){p(),e>5&&b();if(d.children[e>=5?5:e].firstElementChild.classList.add("number-page__btn--current"),n(a),i(c),e<=5)return void h();v()}();l>=4&&l<=e-3&&(r(),d.children[3].firstElementChild.classList.add("number-page__btn--current"),b(),g(),n(c),n(a),f());if(l<4)return u(),m(),e>5&&g(),n(c),void h();l>e-3&&(_(),p(),e>5&&b(),n(c),n(a),v());y()}))}const _={cardSet:document.querySelector(".card-set"),showWatchedBtn:document.querySelector(".header-library__button--watched"),showQueueBtn:document.querySelector(".header-library__button--queue")};let p=0;const m=async t=>{await t.map((t=>e(t).then((e=>b(e)))))},b=e=>{const{id:t,genre_ids:n,poster_path:i,original_title:s,title:r,release_date:l,genres:a,vote_average:c}=e,d=`<li class="card-set__item" data-id="${t}">\n                <div class="card-set__box-img"">\n                <img src="https://image.tmdb.org/t/p/original${i}" alt="${s}"\n                class="card-set__img"\n                />\n                </div>\n                <h3 class="card-set__title">${r}</h3>\n                <div class="card-set__description">\n                <ul class="card-set__genre">\n                    <li class="card-set__genre-movie">Drama,&nbsp</li>\n                    <li class="card-set__genre-movie">Action&nbsp</li>\n                </ul>\n                    <span class="card-set__production-year">| ${new Date(l).getFullYear().toString()}</span>\n                    <span class="card-set__rating">${c}</span>\n                </div>\n                </li>`;_.cardSet.insertAdjacentHTML("afterbegin",d)},g=e=>{p=Math.ceil(e.length/10)};_.showWatchedBtn.addEventListener("click",(()=>{const e=localStorage.getItem("watched"),t=JSON.parse(e);_.cardSet.innerHTML="",m(t),g(t),u(p,b)})),_.showQueueBtn.addEventListener("click",(()=>{const e=localStorage.getItem("queue"),t=JSON.parse(e);_.cardSet.innerHTML="",m(t),g(t),u(p,b)}));const f=document.querySelector(".film-card__box");f.addEventListener("click",(function(e){if(!e.target.closest(".description-button__watched"))return;const t=e.target.closest(".description-button__watched").dataset.id,n=JSON.parse(localStorage.getItem("watched")||"[]"),i=t;if(n.includes(i))return;n.push(i),localStorage.setItem("watched",JSON.stringify(n))})),f.addEventListener("click",(function(e){if(!e.target.closest(".description-button__queue"))return;const t=e.target.closest(".description-button__queue").dataset.id,n=JSON.parse(localStorage.getItem("queue")||"[]"),i=t;if(n.includes(i))return;n.push(i),localStorage.setItem("queue",JSON.stringify(n))}));
//# sourceMappingURL=library.ef936140.js.map
