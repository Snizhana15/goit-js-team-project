{"mappings":"oeAAAA,EAAA,SCAAA,EAAA,S,8BAKA,MAAMC,EAAO,CACXC,QAASC,SAASC,cAAc,aAChCC,eAAgBF,SAASC,cAAc,oCACvCE,aAAcH,SAASC,cAAc,mCAGvC,IAAIG,EAAY,EAEhB,MA0BMC,EAAgBC,MAAMC,UACFA,EAAuBC,KAAIC,IACjD,EAAAC,EAAAC,cAAaF,GAAUG,MAAKC,GAAYC,EAAcD,QAIpDC,EAAgBC,IACpB,MAAMC,GACJA,EAAEC,UACFA,EAASC,YACTA,EAAWC,eACXA,EAAcC,MACdA,EAAKC,aACLA,EAAYC,OACZA,EAAMC,aACNA,GACER,EAYES,EAAS,uCAAuCR,uHAEOE,WAAqBC,sIAItCC,mVAhBrB,IAAIK,KAAKJ,GAAcK,cAAcC,yEAuBTJ,0DAInDzB,EAAKC,QAAQ6B,mBAAmB,aAAcJ,IAG1CK,EAAgBC,IACpB1B,EAAY2B,KAAKC,KAAKF,EAAIG,OAAS,KAGrCnC,EAAKI,eAAegC,iBAAiB,SA9Ef,KACpB,MAAMC,EAAkBC,aAAaC,QAAQ,WACvCC,EAAqBC,KAAKC,MAAML,GAEtCrC,EAAKC,QAAQ0C,UAAY,GAEzBpC,EAAciC,GAEdT,EAAcS,IAEd,EAAAI,EAAAC,kBAAiBvC,EAAWU,MAqE9BhB,EAAKK,aAAa+B,iBAAiB,SAlEf,KAClB,MAAMU,EAAsBR,aAAaC,QAAQ,SAC3C9B,EAAyBgC,KAAKC,MAAMI,GAE1C9C,EAAKC,QAAQ0C,UAAY,GAEzBpC,EAAcE,GAEdsB,EAActB,IAEd,EAAAmC,EAAAC,kBAAiBvC,EAAWU,M","sources":["src/library.js","src/js/render-library.js"],"sourcesContent":["import * as things from './js/modal-film';\nimport * as things from './js/render-library';\nimport * as elements from './js/localStorage';\nimport * as things from './js/change-button-condition';\n\n// console.log(things);\n","import { getStorage } from './modal-film';\nimport { getMovieById } from './Api';\nimport { changeMoviesPage } from './change-movies-page';\n\n// import { renderPopularMovies } from './render-popular-movies';\nconst refs = {\n  cardSet: document.querySelector('.card-set'),\n  showWatchedBtn: document.querySelector('.header-library__button--watched'),\n  showQueueBtn: document.querySelector('.header-library__button--queue'),\n};\n\nlet pageCount = 0;\n\nconst onShowWatched = () => {\n  const getWatchedMovie = localStorage.getItem('watched');\n  const parsedWatchedMovie = JSON.parse(getWatchedMovie);\n\n  refs.cardSet.innerHTML = '';\n\n  renderWatched(parsedWatchedMovie);\n\n  getCountPages(parsedWatchedMovie);\n\n  changeMoviesPage(pageCount, renderLibrary);\n};\n\nconst onShowQueue = () => {\n  const getMovieFromStorage = localStorage.getItem('queue');\n  const parsedMovieFromStorage = JSON.parse(getMovieFromStorage);\n\n  refs.cardSet.innerHTML = '';\n\n  renderWatched(parsedMovieFromStorage);\n\n  getCountPages(parsedMovieFromStorage);\n\n  changeMoviesPage(pageCount, renderLibrary);\n};\n\nconst renderWatched = async parsedMovieFromStorage => {\n  const getMovies = await parsedMovieFromStorage.map(moevieId =>\n    getMovieById(moevieId).then(response => renderLibrary(response))\n  );\n};\n\nconst renderLibrary = movies => {\n  const {\n    id,\n    genre_ids,\n    poster_path,\n    original_title,\n    title,\n    release_date,\n    genres,\n    vote_average,\n  } = movies;\n\n  const productionYear = new Date(release_date).getFullYear().toString();\n\n  // const genresList = genres.map(item => item.id).join(', ');\n\n  // const alphabetGenres = getGenresById(genre_ids, genres);\n  // const genresMarkup = getGenresMarkup(alphabetGenres);\n  // console.log(movies);\n  // console.log(genre_ids);\n  // console.log(genresList);\n\n  const markup = `<li class=\"card-set__item\" data-id=\"${id}\">\n                <div class=\"card-set__box-img\"\">\n                <img src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${original_title}\"\n                class=\"card-set__img\"\n                />\n                </div>\n                <h3 class=\"card-set__title\">${title}</h3>\n                <div class=\"card-set__description\">\n                <ul class=\"card-set__genre\">\n                    <li class=\"card-set__genre-movie\">Drama,&nbsp</li>\n                    <li class=\"card-set__genre-movie\">Action&nbsp</li>\n                </ul>\n                    <span class=\"card-set__production-year\">| ${productionYear}</span>\n                    <span class=\"card-set__rating\">${vote_average}</span>\n                </div>\n                </li>`;\n\n  refs.cardSet.insertAdjacentHTML('afterbegin', markup);\n};\n\nconst getCountPages = arr => {\n  pageCount = Math.ceil(arr.length / 10);\n};\n\nrefs.showWatchedBtn.addEventListener('click', onShowWatched);\nrefs.showQueueBtn.addEventListener('click', onShowQueue);\n"],"names":["parcelRequire","$76d8f5d523e840d5$var$refs","cardSet","document","querySelector","showWatchedBtn","showQueueBtn","$76d8f5d523e840d5$var$pageCount","$76d8f5d523e840d5$var$renderWatched","async","parsedMovieFromStorage","map","moevieId","$epB3k","getMovieById","then","response","$76d8f5d523e840d5$var$renderLibrary","movies","id","genre_ids","poster_path","original_title","title","release_date","genres","vote_average","markup","Date","getFullYear","toString","insertAdjacentHTML","$76d8f5d523e840d5$var$getCountPages","arr","Math","ceil","length","addEventListener","getWatchedMovie","localStorage","getItem","parsedWatchedMovie","JSON","parse","innerHTML","$2rqRD","changeMoviesPage","getMovieFromStorage"],"version":3,"file":"library.a72f7ac3.js.map"}