function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},r=n.parcelRequire09c9;null==r&&((r=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},n.parcelRequire09c9=r),r.register("kyEFX",(function(t,n){var i,s;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var r={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},s=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("kyEFX").register(JSON.parse('{"5ZPII":"index.e237a664.js","bJHJB":"movie.a3f3b783.jpg","iYZjP":"symbol.e0e566b2.svg","9bKPF":"no-poster.faaddcd9.png"}'));function a(e=1){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=fadee9dfff8cb6b1bff36771479589d6&page=${e}`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}))}function o(e,t=1){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=fadee9dfff8cb6b1bff36771479589d6&query=${e}&language=eng&page=${t}&include_adult=false`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}))}function l(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=fadee9dfff8cb6b1bff36771479589d6&language=eng").then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e}))}var c;c=new URL(r("kyEFX").resolve("bJHJB"),import.meta.url).toString();const d=document.querySelector(".card-set"),u=document.getElementById("spinner");async function m(e){try{const{results:t,total_pages:n}=await a(e);return{movies:t,totalPages:n}}catch(e){alert(e)}}async function _(e){let t=null;u.classList.add("spinner"),localStorage.getItem("genres")?t=JSON.parse(localStorage.getItem("genres")):(t=await async function(){try{const{genres:e}=await l();return e}catch(e){alert(e)}}(),localStorage.setItem("genres",JSON.stringify(t)));const{movies:n,totalPages:i}=await m(e),s=n.map((e=>function(e,t){const{genre_ids:n,original_title:i,id:s,release_date:r,title:a,poster_path:o}=e,l=function(e){let t="";switch(e.length){case 0:t='<li class="card-set__genre-movie">Genre\'s list is empty</li>';break;case 1:t=`<li class="card-set__genre-movie">${e[0]}</li>`;break;case 2:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]}</li>`;break;case 3:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[2]}</li>`;break;default:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">Other</li>`}return t}(function(e,t){return e.map((e=>t.find((t=>t.id===e)).name))}(n,t)),d=r?new Date(r).getFullYear().toString():"Unknown";return`\n        <li class="card-set__item" data-id="${s}">\n            <div class="card-set__box-img">\n            <img\n                loading="lazy"\n                src="${o?`https://image.tmdb.org/t/p/original${o}`:`${c}`}"\n                alt="${i}"\n                class="card-set__img"\n                \n            />\n            </div>\n            <h3 class="card-set__title">${a}</h3>\n            <div class="card-set__description">\n            <ul class="card-set__genre">\n                ${l}\n            </ul>\n            <span class="card-set__genre-movie">&nbsp| ${d}</span>\n            </div>\n        </li>`}(e,t))).join("");return d.innerHTML="",d.insertAdjacentHTML("afterbegin",s),u.classList.remove("spinner"),i}var p;const b=`<li class="movies-navigation__item">\n    <button\n      type="button"\n      class="movies-navigation__arrow-btn"\n      data-move="backward"\n    >\n      <svg class="movies-navigation__icon-arrow">\n        <use href="${p=new URL(r("kyEFX").resolve("iYZjP"),import.meta.url).toString()}#icon-arrow-left"></use>\n      </svg>\n    </button>\n  </li>\n  <li class="movies-navigation__item">\n    <ul class="number-page">\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">1</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">13</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">14</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">15</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">16</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">17</button>\n      </li>\n      <li class="number-page__item">\n        <button type="button" class="number-page__btn">20</button>\n      </li>\n    </ul>\n  </li>\n  <li class="movies-navigation__item">\n    <button\n      type="button"\n      class="movies-navigation__arrow-btn"\n      data-move="forward"\n    >\n      <svg class="movies-navigation__icon-arrow">\n        <use href="${p}#icon-arrow-right"></use>\n      </svg>\n    </button>\n  </li>`,g=document.querySelector(".movies-navigation");function f(e,t){let n=1;g.innerHTML="",g.insertAdjacentHTML("afterbegin",b);const i=document.querySelector('[data-move="backward"]'),s=document.querySelector('[data-move="forward"]'),r=document.querySelector(".number-page"),a=document.querySelector(".card-set");function o(e){e.removeAttribute("disabled"),e.classList.remove("movies-navigation__arrow-btn--disabled")}function l(e){e.setAttribute("disabled",""),e.classList.add("movies-navigation__arrow-btn--disabled")}function c(){if(e<6)return s.style.display="none",i.style.display="none",function(){let t="";r.innerHTML="";for(let n=0;n<e+2;n+=1)t+=`<li class="number-page__item">\n                <button type="button" class="number-page__btn">${n}</button>\n              </li>`;r.insertAdjacentHTML("afterbegin",t)}(),p(),_(),void r.children[1].firstElementChild.classList.add("number-page__btn--current");p(),v(),r.children[1].firstElementChild.classList.add("number-page__btn--current"),r.lastElementChild.firstElementChild.textContent=String(e),l(i),o(s),h(),L()}function d(){document.querySelector(".number-page__btn--current").classList.remove("number-page__btn--current")}function u(){d(),r.children[n].firstElementChild.classList.add("number-page__btn--current")}function m(){d(),r.children[n-e+5].firstElementChild.classList.add("number-page__btn--current")}function _(){r.lastElementChild.style.display="none",r.children[r.children.length-2].style.marginRight="0px"}function p(){r.firstElementChild.style.display="none"}function f(){r.firstElementChild.style.display="list-item"}function v(){r.lastElementChild.style.display="list-item",r.children[r.children.length-2].style.marginRight="16px"}function y(){for(let e=1;e<r.children.length-1;e+=1){const t=n-3+e;r.children[e].firstElementChild.textContent=t.toString()}}function h(){for(let e=1;e<r.children.length-1;e+=1){const t=e;r.children[e].firstElementChild.textContent=t.toString()}}function w(){for(let t=1;t<r.children.length-1;t+=1){const n=e-5+t;r.children[t].firstElementChild.textContent=n.toString()}}function L(){window.innerWidth<768&&(p(),_())}c(),i.addEventListener("click",(function(){n-=1,t(n),a.scrollIntoView(),o(s),1===n&&l(i);if(n>e-3)return void m();n<4&&(p(),u());n>=3&&n<=e-3&&(v(),y());L()})),s.addEventListener("click",(function(){n+=1,t(n),a.scrollIntoView(),o(i),n===e&&l(s);if(n<4)return void u();n>e-3&&(_(),m());n>=4&&n<=e-2&&(f(),y());L()})),r.addEventListener("click",(function(b){if("BUTTON"!==b.target.nodeName)return;if(b.target.classList.contains("number-page__btn--current"))return;if(n=Number(b.target.textContent),t(n),a.scrollIntoView(),1===n)return d(),void c();if(n===e)return d(),void function(){_(),e>5&&f();if(r.children[e>=5?5:e].firstElementChild.classList.add("number-page__btn--current"),o(i),l(s),e<=5)return void h();w()}();n>=4&&n<=e-3&&(d(),r.children[3].firstElementChild.classList.add("number-page__btn--current"),f(),v(),o(s),o(i),y());if(n<4)return u(),p(),e>5&&v(),o(s),void h();n>e-3&&(m(),_(),e>5&&f(),o(s),o(i),w());L()}))}var v;v=new URL(r("kyEFX").resolve("9bKPF"),import.meta.url).toString();var y,h=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,S=/^0o[0-7]+$/i,E=parseInt,$="object"==typeof n&&n&&n.Object===Object&&n,k="object"==typeof self&&self&&self.Object===Object&&self,q=$||k||Function("return this")(),x=Object.prototype.toString,C=Math.max,j=Math.min,F=function(){return q.Date.now()};function M(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function O(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}(e))return NaN;if(M(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var n=L.test(e);return n||S.test(e)?E(e.slice(2),n?2:8):w.test(e)?NaN:+e}y=function(e,t,n){var i,s,r,a,o,l,c=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=i,r=s;return i=s=void 0,c=t,a=e.apply(r,n)}function p(e){return c=e,o=setTimeout(g,t),d?_(e):a}function b(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=r}function g(){var e=F();if(b(e))return f(e);o=setTimeout(g,function(e){var n=t-(e-l);return u?j(n,r-(e-c)):n}(e))}function f(e){return o=void 0,m&&i?_(e):(i=s=void 0,a)}function v(){var e=F(),n=b(e);if(i=arguments,s=this,l=e,n){if(void 0===o)return p(l);if(u)return o=setTimeout(g,t),_(l)}return void 0===o&&(o=setTimeout(g,t)),a}return t=O(t)||0,M(n)&&(d=!!n.leading,r=(u="maxWait"in n)?C(O(n.maxWait)||0,t):r,m="trailing"in n?!!n.trailing:m),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,i=l=s=o=void 0},v.flush=function(){return void 0===o?a:f(F())},v};const T=document.querySelector(".card-set"),H=document.querySelector(".header__form-input"),N=document.getElementById("spinner");H.addEventListener("input",t(y)((function(e){e.preventDefault(),I=e.target.value.trim(),""===I?P():async function(){f(await J(),J)}()}),1e3));let I="";async function A(e){try{const{results:t,total_pages:n,total_results:i}=await o(I,e);return 0===i?(R.classList.remove("is-hidden"),setTimeout((()=>{R.classList.add("is-hidden")}),3e3),P()):R.classList.add("is-hidden"),{movies:t,totalPages:n}}catch(e){alert(e)}}async function J(e){N.classList.add("spinner");const t=await async function(){try{const{genres:e}=await l();return e}catch(e){alert(e)}}(),{movies:n,totalPages:i}=await A(e),s=n.map((e=>function(e,t){const{genre_ids:n,original_title:i,id:s,release_date:r,title:a,poster_path:o}=e,l=function(e){let t="";switch(e.length){case 1:t=`<li class="card-set__genre-movie">${e[0]}</li>`;break;case 2:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]}</li>`;break;case 3:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[2]}</li>`;break;default:t=`<li class="card-set__genre-movie">${e[0]},&nbsp</li>\n                      <li class="card-set__genre-movie">${e[1]},&nbsp</li>\n                      <li class="card-set__genre-movie">Other</li>`}return t}(function(e,t){return e.map((e=>t.find((t=>t.id===e)).name))}(n,t)),c=r?new Date(r).getFullYear().toString():"Unknown";return`\n        <li class="card-set__item" data-id="${s}">\n            <div class="card-set__box-img">\n            <img\n                loading="lazy"\n                src="${o?`https://image.tmdb.org/t/p/original${o}`:`${v}`}"\n                alt="${i}"\n                class="card-set__img"  \n            />\n            </div>\n            <h3 class="card-set__title">${a}</h3>\n            <div class="card-set__description">\n            <ul class="card-set__genre">\n                ${l}\n            </ul>\n            <span class="card-set__genre-movie">&nbsp| ${c}</span>\n            </div>\n        </li>`}(e,t))).join("");return T.innerHTML="",T.insertAdjacentHTML("afterbegin",s),N.classList.remove("spinner"),i}async function P(){f(await _(),_)}const R=document.querySelector(".header__error-text");const U=(e,t)=>{const n=localStorage.getItem("watched"),i=JSON.parse(n);i&&i.includes(e)&&(t.textContent="in watched",t.style.backgroundColor="lightgray",t.setAttribute("disabled",""))},B=(e,t)=>{const n=localStorage.getItem("queue"),i=JSON.parse(n);i&&i.includes(e)&&(t.textContent="in queue",t.style.backgroundColor="lightgray",t.setAttribute("disabled",""))},D={openModalFilm:document.querySelector(".card-set"),closeModalFilm:document.querySelector(".film-card__button-close"),body:document.querySelector("body"),backdropModalFilm:document.querySelector(".backdrop"),modalFilm:document.querySelector(".film-card__box")},V=document.querySelector(".spinner--modal"),X=e=>{const{poster_path:t,title:n,id:i,vote_average:s,vote_count:r,popularity:a,original_title:o,genres:l,overview:c}=e,d=`<div class="film-card__image-block">\n      <img\n        class="film-card__image"\n        src="https://image.tmdb.org/t/p/original${t}"\n        alt="film"\n      />\n    </div>\n    <div class="film-card__description">\n      <h1 class="film-card__description-title">${n}</h1>\n      <ul class="film-card__description-set">\n        <li class="description-set">\n          <p class="description-set__text">Vote / Votes</p>\n          <p class="description-set__value">\n            <span class="description-set__rating">${s}</span>\n            <span class="description-set__separator">/</span>\n            <span class="description-set__vote">${r}</span>\n          </p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Popularity</p>\n          <p class="description-set__value">${a}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Original Title</p>\n          <p class="description-set__value">${o}</p>\n        </li>\n        <li class="description-set">\n          <p class="description-set__text">Genre</p>\n          <p class="description-set__value">${l.map((e=>e.name)).join(", ")}</p>\n        </li>\n      </ul>\n      <div class="film-card__description-about">\n        <h2 class="description-about__title">About</h2>\n        <p class="description-about__text">${c}</p>\n      </div>\n      <div class="film-card__description-button">\n        <button class="description-button description-button__watched" data-id="${i}">\n          add to Watched\n        </button>\n        <button class="description-button description-button__queue" data-id="${i}">\n          add to queue\n        </button>\n      </div>\n    </div>\n  </div>`;D.modalFilm.insertAdjacentHTML("beforeend",d)},W=e=>{"Escape"===e.code&&(console.log(e.code),D.backdropModalFilm.classList.add("visually-hidden"),D.body.style.overflow="visible",D.body.removeEventListener("keydown",W))},Y=e=>{e.target.closest(".film-card")||(D.backdropModalFilm.classList.add("visually-hidden"),D.body.style.overflow="visible")};D.openModalFilm.addEventListener("click",(async e=>{if(V.classList.add("spinner"),!e.target.closest(".card-set__item"))return;D.modalFilm.innerHTML="",D.backdropModalFilm.classList.remove("visually-hidden"),D.body.style.overflow="hidden";const t=e.target.closest(".card-set__item").dataset.id,n=await(i=t,fetch(`https://api.themoviedb.org/3/movie/${i}?api_key=fadee9dfff8cb6b1bff36771479589d6&language=eng`).then((e=>e.json())).then((e=>{var t;if(null!==(t=e.success)&&void 0!==t&&!t)throw new Error(e.status_message);return e})));var i;X(n);const s=document.querySelector(".description-button__watched"),r=document.querySelector(".description-button__queue");U(t,s),B(t,r),V.classList.remove("spinner"),D.body.addEventListener("keydown",W),D.backdropModalFilm.addEventListener("click",Y)})),D.closeModalFilm.addEventListener("click",(()=>{D.backdropModalFilm.classList.add("visually-hidden"),D.body.style.overflow="visible"}));const Z={openModalHeart:document.querySelector(".heart"),openModalBtn:document.querySelector("[data-modal-opens]"),modal:document.querySelector("[data-modals]"),body:document.querySelector("body")};function z(){Z.modal.classList.remove("is-hiddens"),document.body.classList.add("modal-open"),Z.body.addEventListener("keyup",(function e(t){"Escape"===t.code&&(Z.modal.classList.add("is-hiddens"),document.body.classList.remove("modal-open"),Z.body.removeEventListener("keyup",e))})),Z.modal.addEventListener("click",(function e(t){t.target.closest(".modals")||(Z.modal.classList.add("is-hiddens"),document.body.classList.remove("modal-open"),Z.modal.removeEventListener("click",e))}))}Z.openModalBtn.addEventListener("click",z),Z.openModalHeart.addEventListener("click",z);const G=document.querySelector(".film-card__box");G.addEventListener("click",(function(e){if(!e.target.closest(".description-button__watched"))return;const t=e.target.closest(".description-button__watched").dataset.id,n=JSON.parse(localStorage.getItem("watched")||"[]"),i=t,s=e.target.closest(".description-button__watched");if(n.includes(i))return;s.textContent="in watched",s.style.backgroundColor="lightgray",s.setAttribute("disabled",""),n.push(i),localStorage.setItem("watched",JSON.stringify(n))})),G.addEventListener("click",(function(e){if(!e.target.closest(".description-button__queue"))return;const t=e.target.closest(".description-button__queue").dataset.id,n=JSON.parse(localStorage.getItem("queue")||"[]"),i=t,s=e.target.closest(".description-button__queue");if(n.includes(i))return;s.textContent="in queue",s.style.backgroundColor="lightgray",s.setAttribute("disabled",""),n.push(i),localStorage.setItem("queue",JSON.stringify(n))})),async function(){f(await _(),_)}();
//# sourceMappingURL=index.e237a664.js.map
