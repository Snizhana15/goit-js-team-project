{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,gBCAAD,EAAAC,EAAA,S,yBAEMC,EAAUC,SAASC,cAAc,a,SAExBC,I,OAAAC,EAASC,MAAAC,KAAAC,W,SAATH,I,OAAAA,EAAfI,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,IAEYC,E,4FAAiB,EAAAC,EAAAC,gB,cAAnBF,EAAQG,EAAAC,KAANJ,O,kBACDA,G,gCAEPK,MAAKF,EAAAG,I,0DALeb,MAAAC,KAAAC,W,SASTY,EAA0BC,G,OAA1BC,EAAyBhB,MAAAC,KAAAC,W,SAAzBc,I,OAAAA,EAAfb,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAyCS,G,IAEgBE,EAApCC,EAAqBC,E,4FAAqB,EAAAX,EAAAY,kBACzDL,G,cADmDE,EAEpDP,EAAAC,KAFOO,EAA6CD,EAA7CI,QAAiBF,EAA4BF,EAA5BK,Y,kBAGlB,CAAEJ,SAAQC,e,gCAEjBP,MAAKF,EAAAG,I,0DAP+Bb,MAAAC,KAAAC,W,SAWzBqB,EAAoBR,G,OAApBS,EAAmBxB,MAAAC,KAAAC,W,SAAnBsB,I,OAAAA,EAAfrB,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAmCS,G,IAC3BR,EACyBU,EAAvBC,EAAQC,EAEVM,E,kFAHe3B,I,cAAfS,EAAMG,EAAAC,K,SACyBG,EAA0BC,G,cAAhCE,EAA2CP,EAAAC,KAAlEO,EAAuBD,EAAvBC,OAAQC,EAAeF,EAAfE,WAEVM,EAAcP,EACjBQ,KAAI,SAAAC,G,OAASC,EAAgBD,EAAOpB,MACpCsB,KAAK,IAERlC,EAAQmC,UAAY,GACpBnC,EAAQoC,mBAAmB,aAAcN,G,kBAElCN,G,6CAXyBnB,MAAAC,KAAAC,WA8ClC,SAAS0B,EAAgBD,EAAOpB,GAC9B,IAAQyB,EACNL,EADMK,UAAWC,EACjBN,EADiBM,eAAgBC,EACjCP,EADiCO,GAAIC,EACrCR,EADqCQ,aAAcC,EACnDT,EADmDS,MAAOC,EAC1DV,EAD0DU,YAGtDC,EApCR,SAAuBC,EAAQhC,GAC7B,OAAOgC,EAAOb,KAAI,SAAAQ,G,OAAM3B,EAAOiC,MAAK,SAAAC,G,OAASA,EAAMP,KAAOA,KAAIQ,QAmCvCC,CAAcX,EAAWzB,GAC1CqC,EAjCR,SAAyBrC,GACvB,IAAIqC,EAAe,GAEnB,OAAQrC,EAAOsC,QACb,KAAK,EACHD,EAAe,qCAA+CE,OAAVvC,EAAO,GAAG,SAC9D,MAEF,KAAK,EACHqC,EAAe,qCACqCE,OADAvC,EAAO,GAAG,yEACAuC,OAAVvC,EAAO,GAAG,SAC9D,MAEF,KAAK,EACHqC,EAAe,qCACqCE,OADAvC,EAAO,GAAG,yEAEVuC,OADAvC,EAAO,GAAG,yEACAuC,OAAVvC,EAAO,GAAG,SAC9D,MAEF,QACEqC,EAAe,qCACqCE,OADAvC,EAAO,GAAG,yEACAuC,OAAVvC,EAAO,GAAG,kFAIlE,OAAOqC,EAQcG,CAAgBT,GAC/BU,EAAiB,IAAIC,KAAKd,GAAce,cAAcC,WAE5D,MAAO,iDAKiDL,OAJZZ,EAAG,+JAK1BY,OADmCT,EAAY,4BAM5BS,OALnBb,EAAe,4IAQpBa,OAHwBV,EAAM,sHAKSU,OAFvCF,EAAa,gFAEyCE,OAAfE,EAAe,8C,4BC7FpE,IAAMI,EAAO,CACXC,aAAczD,SAASC,cAAc,sBACrCyD,MAAO1D,SAASC,cAAc,iBAC9B0D,KAAM3D,SAASC,cAAc,S,SFDpB2D,I,OAAAA,EAAfrD,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,IACQa,E,kFAAmBI,I,OAAnBJ,EAAUT,EAAAC,MAChB,EAAA8C,EAAAC,kBAAiBvC,EAAa,GAAK,GAAKA,EAAYI,G,4CAFnBvB,MAAAC,KAAAC,WEsB/BkD,EAAKC,aAAaM,iBAAiB,SAnBnC,WACEP,EAAKE,MAAMM,UAAUC,OAAO,cAC5BjE,SAAS2D,KAAKK,UAAUE,IAAI,cAc5BV,EAAKG,KAAKI,iBAAiB,SAb3B,SAASI,EAAWC,GACC,WAAfA,EAAMC,OACRb,EAAKE,MAAMM,UAAUE,IAAI,cACzBlE,SAAS2D,KAAKK,UAAUC,OAAO,cAC/BT,EAAKG,KAAKW,oBAAoB,QAASH,OAU3CX,EAAKE,MAAMK,iBAAiB,SAP5B,SAASQ,EAAeH,GAClBA,EAAMI,OAAOC,QAAQ,aACzBjB,EAAKE,MAAMM,UAAUE,IAAI,cACvBlE,SAAS2D,KAAKK,UAAUC,OAAO,cACjCT,EAAKE,MAAMY,oBAAoB,QAASC,U,iCFjBjCX,EAAoBxD,MAAAC,KAAAC,WAKnCoE,G","sources":["src/index.js","src/js/render-popular-movies.js","src/js/modal-students.js"],"sourcesContent":["import { renderPopularMovies } from './js/render-popular-movies';\nimport { changeMoviesPage } from './js/change-movies-page';\n\nasync function downloadMainHomePage() {\n  const totalPages = await renderPopularMovies();\n  changeMoviesPage(totalPages > 50 ? 50 : totalPages, renderPopularMovies);\n}\n\ndownloadMainHomePage();\n\n/*\nІмпорт всього файлу modal-film.js\n*/\n\nimport * as things from './js/modal-film';\nimport * as elem from './js/modal-students';\nimport * as elements from './js/localStorage';\nimport * as things from './js/change-button-condition';\n","import { getPopularMovies, getGenreList } from './Api';\n\nconst cardSet = document.querySelector('.card-set');\n\nasync function getGenres() {\n  try {\n    const { genres } = await getGenreList();\n    return genres;\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function getDataAboutPopularMovies(pageNumber) {\n  try {\n    const { results: movies, total_pages: totalPages } = await getPopularMovies(\n      pageNumber\n    );\n    return { movies, totalPages };\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function renderPopularMovies(pageNumber) {\n  const genres = await getGenres();\n  const { movies, totalPages } = await getDataAboutPopularMovies(pageNumber);\n\n  const cardsMarkup = movies\n    .map(movie => renderMovieCard(movie, genres))\n    .join('');\n\n  cardSet.innerHTML = '';\n  cardSet.insertAdjacentHTML('afterbegin', cardsMarkup);\n\n  return totalPages;\n}\n\nfunction getGenresById(idList, genres) {\n  return idList.map(id => genres.find(genre => genre.id === id).name);\n}\n\nfunction getGenresMarkup(genres) {\n  let genresMarkup = '';\n\n  switch (genres.length) {\n    case 1:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]}</li>`;\n      break;\n\n    case 2:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]}</li>`;\n      break;\n\n    case 3:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[2]}</li>`;\n      break;\n\n    default:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">Інші</li>`;\n  }\n\n  return genresMarkup;\n}\n\nfunction renderMovieCard(movie, genres) {\n  const { genre_ids, original_title, id, release_date, title, poster_path } =\n    movie;\n\n  const alphabetGenres = getGenresById(genre_ids, genres);\n  const genresMarkup = getGenresMarkup(alphabetGenres);\n  const productionYear = new Date(release_date).getFullYear().toString();\n\n  return `\n        <li class=\"card-set__item\" data-id=\"${id}\">\n            <div class=\"card-set__box-img\">\n            <img\n                loading=\"lazy\"\n                src=\"https://image.tmdb.org/t/p/original${poster_path}\"\n                alt=\"${original_title}\"\n                class=\"card-set__img\"\n                \n            />\n            </div>\n            <h3 class=\"card-set__title\">${title}</h3>\n            <div class=\"card-set__description\">\n            <ul class=\"card-set__genre\">\n                ${genresMarkup}\n            </ul>\n            <span class=\"card-set__genre-movie\">&nbsp| ${productionYear}</span>\n            </div>\n        </li>`;\n}\n\nexport { renderPopularMovies };\n","\n    const refs = {\n      openModalBtn: document.querySelector('[data-modal-opens]'),\n      modal: document.querySelector('[data-modals]'),\n      body: document.querySelector('body'),\n    };\n    function toggleModal() {\n      refs.modal.classList.remove('is-hiddens');\n      document.body.classList.add(\"modal-open\");\n      function onKeyPress(event) {\n        if (event.code === 'Escape') {\n          refs.modal.classList.add('is-hiddens');\n          document.body.classList.remove(\"modal-open\");\n          refs.body.removeEventListener('keyup', onKeyPress);\n        }\n      }\n      function onGalleryClick(event) {\n        if (event.target.closest('.modals')) return;\n        refs.modal.classList.add('is-hiddens');\n          document.body.classList.remove(\"modal-open\");\n        refs.modal.removeEventListener('click', onGalleryClick);\n      }\n      refs.body.addEventListener('keyup', onKeyPress);\n      refs.modal.addEventListener('click', onGalleryClick);\n    }\n    refs.openModalBtn.addEventListener('click', toggleModal);"],"names":["$bpxeT","parcelRequire","$a29be838f27344f1$var$cardSet","document","querySelector","$a29be838f27344f1$var$getGenres","$a29be838f27344f1$var$_getGenres","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","genres","$fkvfI","getGenreList","_ctx","sent","alert","t0","$a29be838f27344f1$var$getDataAboutPopularMovies","pageNumber","$a29be838f27344f1$var$_getDataAboutPopularMovies","ref","movies","totalPages","getPopularMovies","results","total_pages","$a29be838f27344f1$export$12335c527465096d","$a29be838f27344f1$var$_renderPopularMovies","cardsMarkup","map","movie","$a29be838f27344f1$var$renderMovieCard","join","innerHTML","insertAdjacentHTML","genre_ids","original_title","id","release_date","title","poster_path","alphabetGenres","idList","find","genre","name","$a29be838f27344f1$var$getGenresById","genresMarkup","length","concat","$a29be838f27344f1$var$getGenresMarkup","productionYear","Date","getFullYear","toString","$d79afc056635d1e1$var$refs","openModalBtn","modal","body","$b8f9b7833fa37166$var$_downloadMainHomePage","$dpMWy","changeMoviesPage","addEventListener","classList","remove","add","onKeyPress","event","code","removeEventListener","onGalleryClick","target","closest","$b8f9b7833fa37166$var$downloadMainHomePage"],"version":3,"file":"index.2560512e.js.map"}