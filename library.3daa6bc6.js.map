{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/modal-film.js","src/js/Api.js","src/js/change-button-condition.js","src/js/localStorage.js","src/js/modal-students.js","src/js/change-movies-page.js","node_modules/@parcel/runtime-js/lib/runtime-0b46b2520f84722c.js","src/js/render-popular-movies.js","node_modules/@parcel/runtime-js/lib/runtime-8ec168ea7376cdf9.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { getMovieById } from './Api';\nimport {\n  changeWatchedButtonCondition,\n  changeQueueButtonCondition,\n} from './change-button-condition';\n\nconst refs = {\n  openModalFilm: document.querySelector('.card-set'),\n  closeModalFilm: document.querySelector('.film-card__button-close'),\n  body: document.querySelector('body'),\n  backdropModalFilm: document.querySelector('.backdrop'),\n  modalFilm: document.querySelector('.film-card__box'),\n};\nconst spinModal = document.querySelector('.spinner--modal');\n\nconst onOpenModal = async e => {\n  spinModal.classList.add('spinner');\n  if (!e.target.closest('.card-set__item')) {\n    return;\n  }\n\n  refs.modalFilm.innerHTML = '';\n  refs.backdropModalFilm.classList.remove('visually-hidden');\n  refs.body.style.overflow = 'hidden';\n\n  const getFilmId = e.target.closest('.card-set__item').dataset.id;\n\n  const infoAboutModalFilm = await getMovieById(getFilmId);\n\n  renderModalFilm(infoAboutModalFilm);\n\n  const watchedBtn = document.querySelector('.description-button__watched');\n  const queueBtn = document.querySelector('.description-button__queue');\n  changeWatchedButtonCondition(getFilmId, watchedBtn);\n  changeQueueButtonCondition(getFilmId, queueBtn);\n\n  spinModal.classList.remove('spinner');\n\n  refs.body.addEventListener('keydown', onKeyPress);\n  refs.backdropModalFilm.addEventListener('click', onBackdropClick);\n};\n\nconst renderModalFilm = modalFilm => {\n  const {\n    poster_path,\n    title,\n    id,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genres,\n    overview,\n  } = modalFilm;\n\n  const genresList = genres.map(item => item.name).join(', ');\n\n  const markupModalFilm = `<div class=\"film-card__image-block\">\n      <img\n        class=\"film-card__image\"\n        src=\"https://image.tmdb.org/t/p/original${poster_path}\"\n        alt=\"film\"\n      />\n    </div>\n    <div class=\"film-card__description\">\n      <h1 class=\"film-card__description-title\">${title}</h1>\n      <ul class=\"film-card__description-set\">\n        <li class=\"description-set\">\n          <p class=\"description-set__text\">Vote / Votes</p>\n          <p class=\"description-set__value\">\n            <span class=\"description-set__rating\">${vote_average}</span>\n            <span class=\"description-set__separator\">/</span>\n            <span class=\"description-set__vote\">${vote_count}</span>\n          </p>\n        </li>\n        <li class=\"description-set\">\n          <p class=\"description-set__text\">Popularity</p>\n          <p class=\"description-set__value\">${popularity}</p>\n        </li>\n        <li class=\"description-set\">\n          <p class=\"description-set__text\">Original Title</p>\n          <p class=\"description-set__value\">${original_title}</p>\n        </li>\n        <li class=\"description-set\">\n          <p class=\"description-set__text\">Genre</p>\n          <p class=\"description-set__value\">${genresList}</p>\n        </li>\n      </ul>\n      <div class=\"film-card__description-about\">\n        <h2 class=\"description-about__title\">About</h2>\n        <p class=\"description-about__text\">${overview}</p>\n      </div>\n      <div class=\"film-card__description-button\">\n        <button class=\"description-button description-button__watched\" data-id=\"${id}\">\n          add to Watched\n        </button>\n        <button class=\"description-button description-button__queue\" data-id=\"${id}\">\n          add to queue\n        </button>\n      </div>\n    </div>\n  </div>`;\n\n  refs.modalFilm.insertAdjacentHTML('beforeend', markupModalFilm);\n};\n\nconst onKeyPress = e => {\n  if (e.code === 'Escape') {\n    console.log(e.code);\n    refs.backdropModalFilm.classList.add('visually-hidden');\n    refs.body.style.overflow = 'visible';\n    refs.body.removeEventListener('keydown', onKeyPress);\n  }\n};\n\nconst onBackdropClick = e => {\n  if (e.target.closest('.film-card')) {\n    return;\n  }\n  refs.backdropModalFilm.classList.add('visually-hidden');\n  refs.body.style.overflow = 'visible';\n};\n\nrefs.openModalFilm.addEventListener('click', onOpenModal);\n\nrefs.closeModalFilm.addEventListener('click', () => {\n  refs.backdropModalFilm.classList.add('visually-hidden');\n  refs.body.style.overflow = 'visible';\n});\n","const KEY = 'fadee9dfff8cb6b1bff36771479589d6';\n\n/*\nФункцию getPopularMovies() используем для запроса при рендере карточек популярных фильмов на главной странице.\n*/\n\nexport function getPopularMovies(pageNumber = 1) {\n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY}&page=${pageNumber}`\n  )\n    .then(response => response.json())\n    .then(data => {\n      if (!(data.success ?? true)) {\n        throw new Error(data.status_message);\n      }\n      return data;\n    });\n}\n\n/*\nФункцию getMoviesBySearchQuery(searchQuery) используем для запроса при рендере карточек при поиске по ключевому слову.\nПараметр searchQuery должен быть строкой из input-а поиска.\n*/\n\nexport function getSearchQuery(searchQuery, pageNumber = 1) {\n  const url = 'https://api.themoviedb.org/3';\n  return fetch(\n    `${url}/search/movie?api_key=${KEY}&query=${searchQuery}&language=eng&page=${pageNumber}&include_adult=false`\n  )\n    .then(response => response.json())\n    .then(data => {\n      if (!(data.success ?? true)) {\n        throw new Error(data.status_message);\n      }\n      return data;\n    });\n}\n\n/*\nФункцию getMovieById(id) используем для запроса при отображении полной информации о фильме (модалка при клике на карточку).\nПараметр id должен быть строкой или числом. \n*/\n\nexport function getMovieById(id) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${id}?api_key=${KEY}&language=eng`\n  )\n    .then(response => response.json())\n    .then(data => {\n      if (!(data.success ?? true)) {\n        throw new Error(data.status_message);\n      }\n      return data;\n    });\n}\n\n/*\nЖанры каждого фильма хранятся в виде массива чисел. Кажое число соответствует своему жанру. \nФункция getGenreList() возвращает массив объектов, свойствами которых есть число и соответствующий ему жанр.\nИспользуем при отображении жанров на карточках и модалке.\n*/\n\nexport function getGenreList() {\n  return fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY}&language=eng`\n  )\n    .then(response => response.json())\n    .then(data => {\n      if (!(data.success ?? true)) {\n        throw new Error(data.status_message);\n      }\n      return data;\n    });\n}\n","const changeWatchedButtonCondition = (filmId, watchedBtn) => {\n  const getWatched = localStorage.getItem('watched');\n  const parsGetWatched = JSON.parse(getWatched);\n\n  if (!parsGetWatched) {\n    return;\n  } else if (parsGetWatched.includes(filmId)) {\n    watchedBtn.textContent = 'in watched';\n    watchedBtn.style.backgroundColor = 'lightgray';\n    watchedBtn.setAttribute('disabled', '');\n  }\n};\n\nconst changeQueueButtonCondition = (filmId, queueBtn) => {\n  const getQueue = localStorage.getItem('queue');\n  const parseGetQueue = JSON.parse(getQueue);\n\n  if (!parseGetQueue) {\n    return;\n  } else if (parseGetQueue.includes(filmId)) {\n    queueBtn.textContent = 'in queue';\n    queueBtn.style.backgroundColor = 'lightgray';\n    queueBtn.setAttribute('disabled', '');\n  }\n};\n\nexport { changeWatchedButtonCondition, changeQueueButtonCondition };\n","const cardBox = document.querySelector('.film-card__box');\ncardBox.addEventListener('click', addWatched);\ncardBox.addEventListener('click', addQueue);\nfunction addWatched(e) {\n  if (!e.target.closest('.description-button__watched')) {\n    return;\n  }\n  const getFilmId = e.target.closest('.description-button__watched').dataset.id;\n  const films = JSON.parse(localStorage.getItem('watched') || '[]');\n  const film = getFilmId;\n  const watchedBtn = e.target.closest('.description-button__watched');\n  if (films.includes(film)) {\n    return;\n  }\n  watchedBtn.textContent = 'in watched';\n  watchedBtn.style.backgroundColor = 'lightgray';\n  watchedBtn.setAttribute('disabled', '');\n  films.push(film);\n  localStorage.setItem('watched', JSON.stringify(films));\n}\nfunction addQueue(e) {\n  if (!e.target.closest('.description-button__queue')) {\n    return;\n  }\n  const getFilmId = e.target.closest('.description-button__queue').dataset.id;\n  const films = JSON.parse(localStorage.getItem('queue') || '[]');\n  const film = getFilmId;\n  const queueBtn = e.target.closest('.description-button__queue');\n  if (films.includes(film)) {\n    return;\n  }\n  queueBtn.textContent = 'in queue';\n  queueBtn.style.backgroundColor = 'lightgray';\n  queueBtn.setAttribute('disabled', '');\n  films.push(film);\n  localStorage.setItem('queue', JSON.stringify(films));\n}\n","\n    const refs = {\n      openModalBtn: document.querySelector('[data-modal-opens]'),\n      modal: document.querySelector('[data-modals]'),\n      body: document.querySelector('body'),\n    };\n    function toggleModal() {\n      refs.modal.classList.remove('is-hiddens');\n      document.body.classList.add(\"modal-open\");\n      function onKeyPress(event) {\n        if (event.code === 'Escape') {\n          refs.modal.classList.add('is-hiddens');\n          document.body.classList.remove(\"modal-open\");\n          refs.body.removeEventListener('keyup', onKeyPress);\n        }\n      }\n      function onGalleryClick(event) {\n        if (event.target.closest('.modals')) return;\n        refs.modal.classList.add('is-hiddens');\n          document.body.classList.remove(\"modal-open\");\n        refs.modal.removeEventListener('click', onGalleryClick);\n      }\n      refs.body.addEventListener('keyup', onKeyPress);\n      refs.modal.addEventListener('click', onGalleryClick);\n    }\n    refs.openModalBtn.addEventListener('click', toggleModal);","import * as arrowIcons from '../images/symbol.svg';\n\nconst moviesNavigationMarkup = `<li class=\"movies-navigation__item\">\n    <button\n      type=\"button\"\n      class=\"movies-navigation__arrow-btn\"\n      data-move=\"backward\"\n    >\n      <svg class=\"movies-navigation__icon-arrow\">\n        <use href=\"${arrowIcons}#icon-arrow-left\"></use>\n      </svg>\n    </button>\n  </li>\n  <li class=\"movies-navigation__item\">\n    <ul class=\"number-page\">\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">1</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">13</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">14</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">15</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">16</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">17</button>\n      </li>\n      <li class=\"number-page__item\">\n        <button type=\"button\" class=\"number-page__btn\">20</button>\n      </li>\n    </ul>\n  </li>\n  <li class=\"movies-navigation__item\">\n    <button\n      type=\"button\"\n      class=\"movies-navigation__arrow-btn\"\n      data-move=\"forward\"\n    >\n      <svg class=\"movies-navigation__icon-arrow\">\n        <use href=\"${arrowIcons}#icon-arrow-right\"></use>\n      </svg>\n    </button>\n  </li>`;\n\nconst moviesNavigation = document.querySelector('.movies-navigation');\n\n/*\n  Функция changeMoviesPage принимает в качестве первого аргумента общее количество страниц, доступных для пагинации, а в качестве второго - функцию для рендера карточек фильмов.\n*/\n\nfunction changeMoviesPage(totalPages, renderMovies) {\n  let pageNumber = 1;\n\n  moviesNavigation.innerHTML = '';\n  moviesNavigation.insertAdjacentHTML('afterbegin', moviesNavigationMarkup);\n\n  const backwardBtn = document.querySelector('[data-move=\"backward\"]');\n  const forwardBtn = document.querySelector('[data-move=\"forward\"]');\n  const pageNumberList = document.querySelector('.number-page');\n  const cardSet = document.querySelector('.card-set');\n\n  renderStartPageNumberList(totalPages);\n\n  backwardBtn.addEventListener('click', onBackwardBtnClick);\n  forwardBtn.addEventListener('click', onForwardBtnClick);\n  pageNumberList.addEventListener('click', onPageNumberClick);\n\n  function onForwardBtnClick() {\n    pageNumber += 1;\n    renderMovies(pageNumber);\n    cardSet.scrollIntoView();\n\n    activateBtn(backwardBtn);\n    if (pageNumber === totalPages) {\n      deactivateBtn(forwardBtn);\n    }\n\n    if (pageNumber < 4) {\n      changeCurrentBtnOnStart();\n      return;\n    }\n\n    if (pageNumber > totalPages - 3) {\n      hideLastPageNumberListElement();\n      changeCurrentBtnOnEnd();\n    }\n\n    if (pageNumber >= 4 && pageNumber <= totalPages - 2) {\n      showFirstPageNumberListElement();\n      setNewBtnPageNumbers();\n    }\n\n    hideStartAndEndPageNumbersForMobile();\n  }\n\n  function onBackwardBtnClick() {\n    pageNumber -= 1;\n    renderMovies(pageNumber);\n    cardSet.scrollIntoView();\n\n    activateBtn(forwardBtn);\n    if (pageNumber === 1) {\n      deactivateBtn(backwardBtn);\n    }\n\n    if (pageNumber > totalPages - 3) {\n      changeCurrentBtnOnEnd();\n      return;\n    }\n\n    if (pageNumber < 4) {\n      hideFirstPageNumberListElement();\n      changeCurrentBtnOnStart();\n    }\n\n    if (pageNumber >= 3 && pageNumber <= totalPages - 3) {\n      showLastPageNumberListElement();\n      setNewBtnPageNumbers();\n    }\n\n    hideStartAndEndPageNumbersForMobile();\n  }\n\n  function onPageNumberClick(e) {\n    if (e.target.nodeName !== 'BUTTON') {\n      return;\n    }\n\n    if (e.target.classList.contains('number-page__btn--current')) {\n      return;\n    }\n\n    pageNumber = Number(e.target.textContent);\n    renderMovies(pageNumber);\n    cardSet.scrollIntoView();\n\n    if (pageNumber === 1) {\n      removeCurrentBtnClass();\n      renderStartPageNumberList();\n      return;\n    }\n\n    if (pageNumber === totalPages) {\n      removeCurrentBtnClass();\n      renderEndPageNumberList();\n      return;\n    }\n\n    if (pageNumber >= 4 && pageNumber <= totalPages - 3) {\n      removeCurrentBtnClass();\n      pageNumberList.children[3].firstElementChild.classList.add(\n        'number-page__btn--current'\n      );\n\n      showFirstPageNumberListElement();\n      showLastPageNumberListElement();\n\n      activateBtn(forwardBtn);\n      activateBtn(backwardBtn);\n\n      setNewBtnPageNumbers();\n    }\n\n    if (pageNumber < 4) {\n      changeCurrentBtnOnStart();\n\n      hideFirstPageNumberListElement();\n      if (totalPages > 5) {\n        showLastPageNumberListElement();\n      }\n\n      activateBtn(forwardBtn);\n\n      setNewBtnPageNumbersOnStart();\n      return;\n    }\n\n    if (pageNumber > totalPages - 3) {\n      changeCurrentBtnOnEnd();\n\n      hideLastPageNumberListElement();\n      if (totalPages > 5) {\n        showFirstPageNumberListElement();\n      }\n\n      activateBtn(forwardBtn);\n      activateBtn(backwardBtn);\n\n      setNewBtnPageNumbersOnEnd();\n    }\n\n    hideStartAndEndPageNumbersForMobile();\n  }\n\n  function activateBtn(btnLink) {\n    btnLink.removeAttribute('disabled');\n    btnLink.classList.remove('movies-navigation__arrow-btn--disabled');\n  }\n\n  function deactivateBtn(btnLink) {\n    btnLink.setAttribute('disabled', '');\n    btnLink.classList.add('movies-navigation__arrow-btn--disabled');\n  }\n\n  function renderStartPageNumberList() {\n    if (totalPages < 6) {\n      renderSmallPageNumberList();\n      return;\n    }\n\n    hideFirstPageNumberListElement();\n    showLastPageNumberListElement();\n\n    pageNumberList.children[1].firstElementChild.classList.add(\n      'number-page__btn--current'\n    );\n    pageNumberList.lastElementChild.firstElementChild.textContent =\n      String(totalPages);\n\n    deactivateBtn(backwardBtn);\n    activateBtn(forwardBtn);\n\n    setNewBtnPageNumbersOnStart();\n\n    hideStartAndEndPageNumbersForMobile();\n  }\n\n  function renderEndPageNumberList() {\n    hideLastPageNumberListElement();\n    if (totalPages > 5) {\n      showFirstPageNumberListElement();\n    }\n\n    pageNumberList.children[\n      totalPages >= 5 ? 5 : totalPages\n    ].firstElementChild.classList.add('number-page__btn--current');\n\n    activateBtn(backwardBtn);\n    deactivateBtn(forwardBtn);\n\n    if (totalPages <= 5) {\n      setNewBtnPageNumbersOnStart();\n      return;\n    }\n    setNewBtnPageNumbersOnEnd();\n  }\n\n  function removeCurrentBtnClass() {\n    const currentBtn = document.querySelector('.number-page__btn--current');\n    currentBtn.classList.remove('number-page__btn--current');\n  }\n\n  function changeCurrentBtnOnStart() {\n    removeCurrentBtnClass();\n    pageNumberList.children[pageNumber].firstElementChild.classList.add(\n      'number-page__btn--current'\n    );\n  }\n\n  function changeCurrentBtnOnEnd() {\n    removeCurrentBtnClass();\n    pageNumberList.children[\n      pageNumber - totalPages + 5\n    ].firstElementChild.classList.add('number-page__btn--current');\n  }\n\n  function renderSmallPageNumberList() {\n    hideArrowBtns();\n    renderSmallPageNumberListMarkup();\n\n    hideFirstPageNumberListElement();\n    hideLastPageNumberListElement();\n\n    pageNumberList.children[1].firstElementChild.classList.add(\n      'number-page__btn--current'\n    );\n  }\n\n  function hideLastPageNumberListElement() {\n    pageNumberList.lastElementChild.style.display = 'none';\n    pageNumberList.children[\n      pageNumberList.children.length - 2\n    ].style.marginRight = '0px';\n  }\n\n  function hideFirstPageNumberListElement() {\n    pageNumberList.firstElementChild.style.display = 'none';\n  }\n\n  function showFirstPageNumberListElement() {\n    pageNumberList.firstElementChild.style.display = 'list-item';\n  }\n\n  function showLastPageNumberListElement() {\n    pageNumberList.lastElementChild.style.display = 'list-item';\n    pageNumberList.children[\n      pageNumberList.children.length - 2\n    ].style.marginRight = '16px';\n  }\n\n  function setNewBtnPageNumbers() {\n    for (let i = 1; i < pageNumberList.children.length - 1; i += 1) {\n      const newPageNumber = pageNumber - 3 + i;\n      pageNumberList.children[i].firstElementChild.textContent =\n        newPageNumber.toString();\n    }\n  }\n\n  function setNewBtnPageNumbersOnStart() {\n    for (let i = 1; i < pageNumberList.children.length - 1; i += 1) {\n      const newPageNumber = i;\n      pageNumberList.children[i].firstElementChild.textContent =\n        newPageNumber.toString();\n    }\n  }\n\n  function setNewBtnPageNumbersOnEnd() {\n    for (let i = 1; i < pageNumberList.children.length - 1; i += 1) {\n      const newPageNumber = totalPages - 5 + i;\n      pageNumberList.children[i].firstElementChild.textContent =\n        newPageNumber.toString();\n    }\n  }\n\n  function renderSmallPageNumberListMarkup() {\n    let markup = '';\n    pageNumberList.innerHTML = '';\n    for (let i = 0; i < totalPages + 2; i += 1) {\n      markup += `<li class=\"number-page__item\">\n                <button type=\"button\" class=\"number-page__btn\">${i}</button>\n              </li>`;\n    }\n    pageNumberList.insertAdjacentHTML('afterbegin', markup);\n  }\n\n  function hideArrowBtns() {\n    forwardBtn.style.display = 'none';\n    backwardBtn.style.display = 'none';\n  }\n\n  function hideStartAndEndPageNumbersForMobile() {\n    if (window.innerWidth < 768) {\n      hideFirstPageNumberListElement();\n      hideLastPageNumberListElement();\n    }\n  }\n}\n\nexport { changeMoviesPage };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iYZjP\")).toString();","import { getPopularMovies, getGenreList } from './Api';\n\nconst cardSet = document.querySelector('.card-set');\nconst spinner = document.getElementById('spinner');\n\nasync function getGenres() {\n  try {\n    const { genres } = await getGenreList();\n    return genres;\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function getDataAboutPopularMovies(pageNumber) {\n  try {\n    const { results: movies, total_pages: totalPages } = await getPopularMovies(\n      pageNumber\n    );\n    return { movies, totalPages };\n  } catch (error) {\n    alert(error);\n  }\n}\n\nasync function renderPopularMovies(pageNumber) {\n  spinner.classList.add('spinner');\n  const genres = await getGenres();\n  const { movies, totalPages } = await getDataAboutPopularMovies(pageNumber);\n\n  const cardsMarkup = movies\n    .map(movie => renderMovieCard(movie, genres))\n    .join('');\n\n  cardSet.innerHTML = '';\n  cardSet.insertAdjacentHTML('afterbegin', cardsMarkup);\n  spinner.classList.remove('spinner');\n  return totalPages;\n}\n\nfunction getGenresById(idList, genres) {\n  return idList.map(id => genres.find(genre => genre.id === id).name);\n}\n\nfunction getGenresMarkup(genres) {\n  let genresMarkup = '';\n\n  switch (genres.length) {\n    case 1:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]}</li>`;\n      break;\n\n    case 2:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]}</li>`;\n      break;\n\n    case 3:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[2]}</li>`;\n      break;\n\n    default:\n      genresMarkup = `<li class=\"card-set__genre-movie\">${genres[0]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">${genres[1]},&nbsp</li>\n                      <li class=\"card-set__genre-movie\">Other</li>`;\n  }\n\n  return genresMarkup;\n}\n\nfunction renderMovieCard(movie, genres) {\n  const { genre_ids, original_title, id, release_date, title, poster_path } =\n    movie;\n\n  const alphabetGenres = getGenresById(genre_ids, genres);\n  const genresMarkup = getGenresMarkup(alphabetGenres);\n  const productionYear = new Date(release_date).getFullYear().toString();\n\n  return `\n        <li class=\"card-set__item\" data-id=\"${id}\">\n            <div class=\"card-set__box-img\">\n            <img\n                loading=\"lazy\"\n                src=\"https://image.tmdb.org/t/p/original${poster_path}\"\n                alt=\"${original_title}\"\n                class=\"card-set__img\"\n                \n            />\n            </div>\n            <h3 class=\"card-set__title\">${title}</h3>\n            <div class=\"card-set__description\">\n            <ul class=\"card-set__genre\">\n                ${genresMarkup}\n            </ul>\n            <span class=\"card-set__genre-movie\">&nbsp| ${productionYear}</span>\n            </div>\n        </li>`;\n}\n\nexport { renderPopularMovies, getGenresMarkup };\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"eM9ss\\\":\\\"library.3daa6bc6.js\\\",\\\"iYZjP\\\":\\\"symbol.e0e566b2.svg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$epB3k","parcelRequire","$b89ac968f8ae7162$var$refs","openModalFilm","document","querySelector","closeModalFilm","body","backdropModalFilm","modalFilm","$b89ac968f8ae7162$var$spinModal","$b89ac968f8ae7162$var$renderModalFilm","poster_path","title","vote_average","vote_count","popularity","original_title","genres","overview","markupModalFilm","map","item","name","join","insertAdjacentHTML","$b89ac968f8ae7162$var$onKeyPress","e","code","console","log","classList","add","style","overflow","removeEventListener","$b89ac968f8ae7162$var$onBackdropClick","target","closest","addEventListener","async","innerHTML","remove","getFilmId","dataset","infoAboutModalFilm","getMovieById","watchedBtn","queueBtn","$fHPRY","changeWatchedButtonCondition","changeQueueButtonCondition","$a7e0245fb0110520$var$KEY","$a7e0245fb0110520$export$76bd8a7b840a3729","pageNumber","fetch","then","response","json","data","_success","success","status_message","$a7e0245fb0110520$export$1664b92369554829","searchQuery","$a7e0245fb0110520$export$e05fa48ccab9af8","$a7e0245fb0110520$export$321e906c11f8df73","$b6f31b61c48869a0$export$a1c83784b50cc96","filmId","getWatched","localStorage","getItem","parsGetWatched","JSON","parse","includes","textContent","backgroundColor","setAttribute","$b6f31b61c48869a0$export$f5b843a319935072","getQueue","parseGetQueue","$2338c8cd734f85a6$var$cardBox","films","film","push","setItem","stringify","$8e415dd749dd7be8$var$refs","openModalBtn","modal","onKeyPress","event","onGalleryClick","$k3W4E","$1c72f1042fbd7648$var$moviesNavigationMarkup","$1c72f1042fbd7648$var$moviesNavigation","$1c72f1042fbd7648$export$d91c9980e9a24ec2","totalPages","renderMovies","backwardBtn","forwardBtn","pageNumberList","cardSet","activateBtn","btnLink","removeAttribute","deactivateBtn","renderStartPageNumberList","display","markup","renderSmallPageNumberListMarkup","hideFirstPageNumberListElement","hideLastPageNumberListElement","children","firstElementChild","showLastPageNumberListElement","lastElementChild","String","setNewBtnPageNumbersOnStart","hideStartAndEndPageNumbersForMobile","removeCurrentBtnClass","changeCurrentBtnOnStart","changeCurrentBtnOnEnd","marginRight","showFirstPageNumberListElement","setNewBtnPageNumbers","newPageNumber","toString","setNewBtnPageNumbersOnEnd","window","innerWidth","scrollIntoView","nodeName","contains","Number","renderEndPageNumberList","module","exports","URL","resolve","import","meta","url","$696ffb40b89ad88b$var$cardSet","$696ffb40b89ad88b$var$spinner","getElementById","$696ffb40b89ad88b$export$12335c527465096d","getGenreList","error","alert","$696ffb40b89ad88b$var$getGenres","movies","results","total_pages","getPopularMovies","$696ffb40b89ad88b$var$getDataAboutPopularMovies","cardsMarkup","movie","genre_ids","release_date","genresMarkup","$696ffb40b89ad88b$export$8d9a840d23167eac","idList","find","genre","$696ffb40b89ad88b$var$getGenresById","productionYear","Date","getFullYear","$696ffb40b89ad88b$var$renderMovieCard","register"],"version":3,"file":"library.3daa6bc6.js.map"}